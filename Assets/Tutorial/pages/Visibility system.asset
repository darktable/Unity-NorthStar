%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!114 &11400000
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 0}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 4510294d23d964fe59443526f1ca7c4b, type: 3}
  m_Name: Visibility System
  m_EditorClassIdentifier: 
  m_displayName: Visibility System
  m_hierarchyName: Visibility System
  m_context: {fileID: 11400000, guid: 77856a62df0edd54b9f1618d069ac2fb, type: 2}
  m_markdownFile: {fileID: 0}
  m_priority: 1016
  m_overrideMarkdownText: "# Visibility Set System\n\n## Overview\n\n![](./Images/VisibilitySet/Fig0.png)\n\nDuring
    development, we noticed that only a small part of the boat and its surroundings
    was fully visible at any time. Elements like the boat\u2019s interior and the
    island in Beat 2 were often only partially visible or needed lower detail levels.\n\nTypically,
    LOD (Level of Detail) groups handle this, but in VR, LOD transitions were too
    noticeable due to frequent head movements. We couldn't set precise LOD transition
    points to eliminate this effect, so we created a custom solution. This system
    dynamically manages object visibility and LOD activation, enhancing performance
    throughout the experience.\n\nThis solution is the Visibility Set System. It
    allows designers to define and manage named object groups within a scene, enabling
    and disabling them as needed.\n\n## How the Visibility Set System Works\n\n1.
    **Named Visibility Sets**\n\n    - Designers can define multiple \"sets\" in
    a scene, grouping related objects.\n    - These sets can be enabled or disabled
    dynamically, optimizing rendering and performance.\n\n2. **Multi-Level Detail
    Management**\n\n    - Each set supports multiple LOD levels, including a fully
    disabled state.\n    - Sets can be linked, allowing objects to adjust visibility
    based on narrative events or scene interactions.\n\n3. **Example: Boat Cabin
    System**\n\n    - The boat is divided into multiple visibility sets, including
    one for the cabin interior.\n    - The cabin door has two visibility states:\n       
    - Closed: Activates the cabin_interior_door_closed set, applying a high LOD factor
    (9999) to disable unnecessary objects.\n        - Open: A narrative trigger switches
    to the cabin_interior_door_open set, revealing parts of the island visible through
    the door.\n\n4. **Seamless Transitions**\n\n    - Visibility transitions occur
    during teleports, masking performance spikes from activating objects.\n    -
    This approach was crucial in Beat 2, where rendering the cabin interior, boat
    exterior, port, and island simultaneously was too costly.\n\n5. **Performance
    Optimizations**\n\n    - Entire level sections, including physics, logic, and
    scripts, are disabled when not needed, improving CPU and GPU performance.\n   
    - On scene load, all objects are enabled for the first frame to ensure Awake()
    / Start() methods execute properly, preventing lag spikes when enabling large
    scene sections later.\n\n### Relevant Files\n\n- [ActiveVisibilitySetLevelData.cs](https://github.com/meta-quest/Unity-UtilityPackages/tree/main/com.meta.utilities.environment/Runtime/Scripts/Environment/ActiveVisibilitySetLevelData.cs)\n-
    [VisibilitySet.cs](https://github.com/meta-quest/Unity-UtilityPackages/tree/main/com.meta.utilities.environment/Runtime/Scripts/Environment/VisibilitySet.cs)\n-
    [VisibilitySetData.cs](https://github.com/meta-quest/Unity-UtilityPackages/tree/main/com.meta.utilities.environment/Runtime/Scripts/Environment/VisibilitySetData.cs)\n\n##
    Editor Support\n\nManaging multiple overlapping sets was challenging. To assist
    designers and artists:\n\n- We implemented a context menu tool to convert LOD
    groups into Visibility Set items automatically.\n- The tool could rearrange object
    hierarchies if the original LOD group was misconfigured.\n\nThis allowed artists
    to use familiar workflows while benefiting from the system\u2019s optimizations.\n\n##
    Further Improvements\n\nOpportunities exist to improve the Visibility Set System,
    especially in editor usability:\n\n- Custom inspectors for better visualization
    of active/culled objects.\n- In-editor previews to show which objects are disabled
    under specific set conditions.\n\nThese enhancements would make the system more
    intuitive and reduce iteration time in complex scenes.\n\n## Conclusion\n\nThe
    Visibility Set System significantly optimized performance and rendering efficiency
    in NorthStar, especially for VR gameplay. By dynamically managing visibility
    and LOD levels, we eliminated LOD popping, improved scene transitions, and enabled
    large-scale optimizations without sacrificing visual quality.\n\nWith further
    editor enhancements, the system could become even more powerful, offering better
    visual debugging tools and workflow improvements for designers.\n"
  m_overrideMarkdownRoot: .\Documentation/
